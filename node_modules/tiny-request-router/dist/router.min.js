/*!
 * tiny-request-router v1.2.2 by berstend
 * https://github.com/berstend/tiny-request-router#readme
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).TinyRequestRouter={})}(this,(function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:r,value:e[r++]});else{var i=1,o="";if("?"===e[p=r+1])throw new TypeError('Pattern cannot start with "?" at '+p);for(;p<e.length;)if("\\"!==e[p]){if(")"===e[p]){if(0===--i){p++;break}}else if("("===e[p]&&(i++,"?"!==e[p+1]))throw new TypeError("Capturing groups are not allowed at "+p);o+=e[p++]}else o+=e[p++]+e[p++];if(i)throw new TypeError("Unbalanced pattern at "+r);if(!o)throw new TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:o}),r=p}else{for(var u="",p=r+1;p<e.length;){var f=e.charCodeAt(p);if(!(f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||95===f))break;u+=e[p++]}if(!u)throw new TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:u}),r=p}else t.push({type:"CLOSE",index:r,value:e[r++]});else t.push({type:"OPEN",index:r,value:e[r++]});else t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});else t.push({type:"MODIFIER",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),i=t.prefixes,o=void 0===i?"./":i,u="[^"+n(t.delimiter||"/#?")+"]+?",p=[],f=0,a=0,s="",h=function(e){if(a<r.length&&r[a].type===e)return r[a++].value},d=function(e){var t=h(e);if(void 0!==t)return t;var n=r[a],i=n.type,o=n.index;throw new TypeError("Unexpected "+i+" at "+o+", expected "+e)},v=function(){for(var e,t="";e=h("CHAR")||h("ESCAPED_CHAR");)t+=e;return t};a<r.length;){var l=h("CHAR"),c=h("NAME"),y=h("PATTERN");if(c||y){var E=l||"";-1===o.indexOf(E)&&(s+=E,E=""),s&&(p.push(s),s=""),p.push({name:c||f++,prefix:E,suffix:"",pattern:y||u,modifier:h("MODIFIER")||""})}else{var x=l||h("ESCAPED_CHAR");if(x)s+=x;else if(s&&(p.push(s),s=""),h("OPEN")){E=v();var g=h("NAME")||"",m=h("PATTERN")||"",A=v();d("CLOSE"),p.push({name:g||(m?f++:""),pattern:g&&!m?u:m,prefix:E,suffix:A,modifier:h("MODIFIER")||""})}else d("END")}}return p}function n(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function i(e){return e&&e.sensitive?"":"i"}function o(e,t,o){return function(e,t,r){void 0===r&&(r={});for(var o=r.strict,u=void 0!==o&&o,p=r.start,f=void 0===p||p,a=r.end,s=void 0===a||a,h=r.encode,d=void 0===h?function(e){return e}:h,v="["+n(r.endsWith||"")+"]|$",l="["+n(r.delimiter||"/#?")+"]",c=f?"^":"",y=0,E=e;y<E.length;y++){var x=E[y];if("string"==typeof x)c+=n(d(x));else{var g=n(d(x.prefix)),m=n(d(x.suffix));if(x.pattern)if(t&&t.push(x),g||m)if("+"===x.modifier||"*"===x.modifier){var A="*"===x.modifier?"?":"";c+="(?:"+g+"((?:"+x.pattern+")(?:"+m+g+"(?:"+x.pattern+"))*)"+m+")"+A}else c+="(?:"+g+"("+x.pattern+")"+m+")"+x.modifier;else c+="("+x.pattern+")"+x.modifier;else c+="(?:"+g+m+")"+x.modifier}}if(s)u||(c+=l+"?"),c+=r.endsWith?"(?="+v+")":"$";else{var T=e[e.length-1],R="string"==typeof T?l.indexOf(T[T.length-1])>-1:void 0===T;u||(c+="(?:"+l+"(?="+v+"))?"),R||(c+="(?="+l+"|"+v+")")}return new RegExp(c,i(r))}(r(e,o),t,o)}function u(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}(e,t):Array.isArray(e)?function(e,t,r){var n=e.map((function(e){return u(e,t,r).source}));return new RegExp("(?:"+n.join("|")+")",i(r))}(e,t,r):o(e,t,r)}var p=function(){function e(){this.routes=[]}return e.prototype.all=function(e,t,r){return void 0===r&&(r={}),this._push("ALL",e,t,r)},e.prototype.get=function(e,t,r){return void 0===r&&(r={}),this._push("GET",e,t,r)},e.prototype.post=function(e,t,r){return void 0===r&&(r={}),this._push("POST",e,t,r)},e.prototype.put=function(e,t,r){return void 0===r&&(r={}),this._push("PUT",e,t,r)},e.prototype.patch=function(e,t,r){return void 0===r&&(r={}),this._push("PATCH",e,t,r)},e.prototype.delete=function(e,t,r){return void 0===r&&(r={}),this._push("DELETE",e,t,r)},e.prototype.head=function(e,t,r){return void 0===r&&(r={}),this._push("HEAD",e,t,r)},e.prototype.options=function(e,t,r){return void 0===r&&(r={}),this._push("OPTIONS",e,t,r)},e.prototype.match=function(e,r){for(var n=0,i=this.routes;n<i.length;n++){var o=i[n];if(o.method===e||"ALL"===o.method){if("(.*)"===o.path)return t(t({},o),{params:{0:o.path}});if("/"===o.path&&!1===o.options.end)return t(t({},o),{params:{}});var u=o.regexp.exec(r);if(u&&u.length)return t(t({},o),{matches:u,params:f(u,o.keys)})}}return null},e.prototype._push=function(e,t,r,n){var i=[];"*"===t&&(t="(.*)");var o=u(t,i,n);return this.routes.push({method:e,path:t,handler:r,keys:i,options:n,regexp:o}),this},e}(),f=function(e,t){for(var r={},n=1;n<e.length;n++){var i=t[n-1].name,o=e[n];void 0!==o&&(r[i]=o)}return r};e.Router=p,e.pathToRegexp=u,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=router.min.js.map
